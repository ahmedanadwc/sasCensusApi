<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- HTML header for doxygen 1.8.17-->
<html xmlns="https://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <meta name="generator" content="Doxygen 1.12.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>sasCensusApi: code/programs/step2-SubmitDataApiQuery.sas Source File</title>
    <meta name="description" content="Custom built SAS macro programs to extract data from the public Census Data API. These out of the box custom built SAS macro programs atreamline data acquisition and manipulation. They use the metadata supplied by the Census Data API registration to dynamically derive column type conversion and label assignments. As a minimum, Base SAS Software, version 9.4 Maintenance 4 installation is required to run these macros." />
    <link href="tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
 <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <link href="new_stylesheet.css" rel="stylesheet" type="text/css"/>
  </head>
  <body>
    <div id="top">
      <!-- do not remove this div, it is closed by doxygen! -->
      <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr style="height: 56px">
              <td id="projectlogo">
                <a href=""
                  ><img alt="Logo" src="logo.png"
                /></a>
              </td>
              <td id="projectalign" style="padding-left: 0.5em">
                <div id="projectname">sasCensusApi</div>
                <div id="projectbrief">Custom built SAS macro programs to extract data from the public Census Data API. These out of the box custom built SAS macro programs atreamline data acquisition and manipulation. They use the metadata supplied by the Census Data API registration to dynamically derive column type conversion and label assignments. As a minimum, Base SAS Software, version 9.4 Maintenance 4 installation is required to run these macros.</div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- end header part -->
    </div>
  </body>
</html>
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('step2-_submit_data_api_query_8sas_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">step2-SubmitDataApiQuery.sas</div></div>
</div><!--header-->
<div class="contents">
<a href="step2-_submit_data_api_query_8sas.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/**</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">  @file step2-SubmitDataApiQuery.sas</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">  @brief Illustrates the steps to submit a Census Data API query and generate a SAS data set out of it</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"></span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">  &lt;h4&gt; SAS Macros &lt;/h4&gt;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">  @li util_getdsidvalues.sas</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">  @li censusapi_getdsfullinfo.sas</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">  @li censusapi_submitdataapiquery.sas</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment"></span> </div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">  &lt;h4&gt; Related Programs &lt;/h4&gt;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment"> </span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">  @version SAS 9.4</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">  @author Ahmed Al-Attar</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment"></span> </div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">**/</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>%GLOBAL </div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span>  g_dsRowId</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span>  g_dsUniqueId</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>  ;</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>SYSECHO <span class="stringliteral">&quot;Calling the util_getDsIdValues macro to extract the data set&#39;s unique ID variables from the API metadata table &quot;</span>;</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>%util_getDsIdValues(p_apiBaseUrl=%str(http:<span class="comment">//api.census.gov/data/2000/dec/sf1/) </span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>,p_rtrnRowIDMacVarName=g_dsRowId </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>,p_rtrnUniqueIDMacVarName=g_dsUniqueId)</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span> </div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>SYSECHO <span class="stringliteral">&quot;Calling the censusapi_getDsFullInfo macro to compose a complete Profile of the specified data set&quot;</span>;</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>%censusapi_getDsFullInfo(p_apiListingLibName=APILIB, p_apiListingDsName=_API_ALL_DATA, p_dsRowId=&amp;g_dsRowId)</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span> </div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>SYSECHO <span class="stringliteral">&quot;Calling the censusapi_submitDataApiQuery macro to submit a Census Data Api query and generate SAS data set out of it&quot;</span>;</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>%censusapi_submitDataApiQuery(</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>  p_apiBaseURL=%STR(https:<span class="comment">//api.census.gov/data/2000/dec/sf1?)</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>, p_apiGetClause=%STR(<span class="keyword">get</span>=P010014,P010015,P010010,P010011,P010012,P010013,P010003,P010004,P010005,P010006,P010001,P010002,P010007,P010008,P010009,NAME)</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>, p_apiForClause=%bquote(<span class="keywordflow">for</span>=zip%20code%20tabulation%20area%20(3%20digit)%20(or%20part):*)</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>, p_apiInClause=%bquote(in=state:09,23,25,33,44,50,34,36,42,17,18,26,39,55,19,20,27,29,31,38,46)</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>, p_dsUniqueId=&amp;g_dsUniqueId</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>, p_outDsName=work.sf1_response</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>, p_dataApiKey=&amp;g_apiKey</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>, p_maxVarCount=48)</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="comment">/*</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="comment">Using (https://www.urlencoder.io/) ==&gt; https://api.census.gov/data/2000/dec/sf4?get=HCT004001,NAME&amp;for=tract%20(or%20part):9831&amp;in=state:01%20county:091%20county%20subdivision:93123%20place/remainder%20(or%20part):99999&amp;key=YOUR_KEY_GOES_HERE</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="comment">Using (https://www.urldecoder.io/) ==&gt; https://api.census.gov/data/2000/dec/sf4?get=HCT004001,NAME&amp;for=tract (or part):9831&amp;in=state:01 county:091 county subdivision:93123 place/remainder (or part):99999&amp;key=YOUR_KEY_GOES_HERE</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="comment">*/</span></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<div id="nav-path" class="navpath">
  <!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_050edd66366d13764f98250ef6db77f6.html">code</a></li><li class="navelem"><a class="el" href="dir_d4e10fc70e6a8de2401274992603303f.html">programs</a></li><li class="navelem"><a class="el" href="step2-_submit_data_api_query_8sas.html">step2-SubmitDataApiQuery.sas</a></li>
    <li class="footer">
      Generated by
      <a href="https://www.doxygen.org/index.html">
        <img class="footer" src="doxygen.svg" alt="doxygen"
      /></a>
      1.12.0
    </li>
    <li>
      <i> For more information visit the </i>
      <a href="https://cli.sasjs.io">SASjs cli</a> documentation.
    </li>
  </ul>
</div>
